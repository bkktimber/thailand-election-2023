/* @refresh reload */
import type { Component } from 'solid-js';
import { createSignal, Show, For } from 'solid-js';
import { noShadowDOM } from 'component-register';
import projectMetadata from '@thailand-election-2023/metadata/dist/projects.json';
import css from './header.module.css';

const projectLinks = projectMetadata
	.sort((a, z) => a.EnName.localeCompare(z.EnName))
	.map((data) => ({
		...data,
		isExternal: !data.URL.startsWith('/'),
	}));

const Header: Component = () => {
	noShadowDOM();

	const [isMenuOpen, setIsMenuOpen] = createSignal(false);

	return (
		<>
			<div class={css.header}>
				<a href="/">
					<svg width="269" height="42" viewBox="0 0 269 42">
						<path d="M65.439 30.0401V26.5633L66.5767 26.3047C66.8353 26.2768 66.891 26.1893 66.891 25.9069V14.7843C66.891 14.5575 66.8353 14.47 66.5767 14.3865L65.439 14.104V10.6471H74.1071V14.1279L72.9654 14.4143C72.7108 14.4978 72.6512 14.5854 72.6512 14.8121V25.9228C72.6512 26.1774 72.7108 26.2371 72.9376 26.3206L74.1071 26.6349V30.056L65.439 30.0401Z" />
						<path d="M49.6579 30.0402L44.8246 14.7406C44.8077 14.6744 44.7714 14.6148 44.7204 14.5694C44.6694 14.5241 44.6059 14.495 44.5382 14.486L43.0305 14.2314V10.7029H52.7847V14.2314L51.647 14.5735C51.5369 14.588 51.4359 14.642 51.3627 14.7254C51.2895 14.8088 51.2492 14.916 51.2492 15.027C51.2686 15.3457 51.326 15.6608 51.4202 15.9658L53.4968 24.1566H53.636L55.7046 15.9778C55.7957 15.672 55.853 15.3572 55.8756 15.039C55.869 14.9255 55.8228 14.8179 55.745 14.7351C55.6672 14.6522 55.5628 14.5992 55.45 14.5855L54.3401 14.2433V10.7148H63.8397V14.2155L62.2763 14.5258C62.2057 14.54 62.1408 14.5748 62.0899 14.6258C62.0389 14.6767 62.0041 14.7416 61.9899 14.8122L57.2998 30.0521L49.6579 30.0402Z" />
						<path d="M76.0444 28.6438C76.0633 26.8796 76.1881 25.1181 76.4184 23.3689H81.0846L81.5421 25.5926C82.1399 25.7934 82.7653 25.8994 83.3959 25.9069C84.4779 25.9069 85.19 25.4215 85.19 24.6498C85.19 23.6831 83.9647 23.3132 82.5088 22.8835C79.6008 22.0004 76.124 20.8587 76.124 16.3516C76.124 11.8445 79.0876 10.3646 83.5669 10.3646C86.4192 10.3646 88.273 11.1045 90.266 12.0473C90.2946 13.7158 90.1908 15.3838 89.9557 17.0358H85.2854L85.0587 15.0707C84.6066 14.8805 84.121 14.7831 83.6306 14.7842C82.5764 14.7842 81.8922 15.0388 81.8922 15.8663C81.8922 16.8369 83.2049 17.4097 84.6291 17.8911C87.4137 18.8021 90.9621 20.0591 90.9621 24.1963C90.9621 28.3335 88.3366 30.3543 83.376 30.3543C80.8351 30.3385 78.33 29.754 76.0444 28.6438Z" />
						<path d="M11.4051 10.7029V14.2234L12.8014 14.6212C13.3822 14.7764 13.3742 15.0747 13.0719 15.9777L10.3668 24.1765H10.1719L8.0834 15.9777C7.84869 15.1026 7.85267 14.7366 8.3539 14.6212L9.83772 14.2234V10.7029H0V14.2234L1.59122 14.5337C1.74636 14.5735 1.78217 14.6491 1.82195 14.8042L6.59561 30.0401H13.4577L15.8446 21.9448L18.2314 30.0282H25.1134L29.8871 14.7923C29.9053 14.7257 29.9406 14.665 29.9894 14.6162C30.0383 14.5674 30.099 14.5321 30.1655 14.5138L31.7051 14.2115V10.6909H21.8753V14.2115L23.3591 14.6093C23.8643 14.7247 23.8643 15.0906 23.6296 15.9658L21.5411 24.1646H21.3502L18.6292 15.9777C18.3309 15.0747 18.3189 14.7843 18.8997 14.6212L20.296 14.2234V10.7029H11.4051Z" />
						<path d="M36.2042 21.3043H38.778V20.5723C38.778 19.7767 38.3245 19.355 37.5051 19.355C36.6856 19.355 36.2042 19.7807 36.2042 20.5723V21.3043ZM30.7185 24.6419V20.9105C30.7185 17.4893 33.3758 15.2258 37.3937 15.2258C41.4115 15.2258 44.0649 17.4893 44.0649 20.9105V24.0929H36.2042V24.8567C36.2042 25.6762 37.1669 26.2132 38.1933 26.2132C39.2196 26.2132 40.23 25.7597 40.3971 25.0556H44.045V27.8402C42.5771 29.5667 40.3414 30.3305 38.0222 30.3305C33.6623 30.3265 30.7185 28.063 30.7185 24.6419Z" />
						<path d="M69.8983 8.92063C71.59 8.92063 72.9614 7.54923 72.9614 5.85753C72.9614 4.16583 71.59 2.79443 69.8983 2.79443C68.2066 2.79443 66.8352 4.16583 66.8352 5.85753C66.8352 7.54923 68.2066 8.92063 69.8983 8.92063Z" />
						<path d="M109.353 30.1947V26.109H107.696L107.524 27.309C107.438 27.909 107.153 28.1947 106.153 28.1947H101.124C100.296 28.1947 100.096 27.909 100.096 26.8233V21.3661H106.781V19.509H100.096V14.1376C100.096 13.0518 100.296 12.7661 101.124 12.7661H105.838C106.838 12.7661 107.124 13.0518 107.21 13.6804L107.381 14.8518H109.038V10.7661H95.9813V12.1947L96.4671 12.309C97.2099 12.4804 97.6671 12.6804 97.6671 13.6518V27.309C97.6671 28.309 97.2671 28.4804 96.6385 28.6233L95.9813 28.7661V30.1947H109.353ZM125.465 30.1947V26.109H123.807L123.636 27.309C123.55 27.8804 123.322 28.1947 122.55 28.1947H118.007C117.065 28.1947 116.836 27.9661 116.836 27.109V13.6518C116.836 12.7376 117.065 12.4233 117.865 12.3376L118.807 12.1947V10.7661H112.436V12.1947L113.379 12.3376C114.179 12.4233 114.407 12.7376 114.407 13.6518V27.309C114.407 28.1661 114.35 28.4804 113.522 28.6233L112.722 28.7661V30.1947H125.465ZM140.966 30.1947V26.109H139.308L139.137 27.309C139.051 27.909 138.766 28.1947 137.766 28.1947H132.737C131.908 28.1947 131.708 27.909 131.708 26.8233V21.3661H138.394V19.509H131.708V14.1376C131.708 13.0518 131.908 12.7661 132.737 12.7661H137.451C138.451 12.7661 138.737 13.0518 138.823 13.6804L138.994 14.8518H140.651V10.7661H127.594V12.1947L128.08 12.309C128.823 12.4804 129.28 12.6804 129.28 13.6518V27.309C129.28 28.309 128.88 28.4804 128.251 28.6233L127.594 28.7661V30.1947H140.966ZM151.763 30.509C154.334 30.509 156.677 29.6233 157.992 28.9947V26.9376H156.134C155.163 27.709 153.849 28.3661 151.763 28.3661C149.42 28.3661 146.649 27.5661 146.649 23.2518V17.8233C146.649 13.8233 148.992 12.5947 151.763 12.5947C153.449 12.5947 154.734 12.9661 155.677 13.6518L155.849 16.2804H157.763C157.82 15.3661 157.963 14.0804 157.992 12.309C156.763 11.4804 154.62 10.4518 151.763 10.4518C147.763 10.4518 144.22 12.5947 144.22 18.0233V23.309C144.22 28.9376 148.02 30.509 151.763 30.509ZM170.306 30.1947V28.7661L169.363 28.6233C168.735 28.5376 168.335 28.309 168.335 27.309V15.2518C168.335 14.2233 168.363 13.509 168.392 12.7661H171.363C171.906 12.7661 172.163 12.9947 172.249 13.6804L172.392 14.709H174.078V10.7661H160.163V14.709H161.849L161.992 13.6804C162.078 12.9947 162.335 12.7661 162.878 12.7661H165.849C165.878 13.509 165.906 14.2233 165.906 15.2518V27.309C165.906 28.309 165.506 28.5376 164.878 28.6233L163.935 28.7661V30.1947H170.306ZM183.309 30.1947V28.7661L182.366 28.6233C181.738 28.5376 181.338 28.309 181.338 27.309V13.6518C181.338 12.6518 181.738 12.4233 182.366 12.3376L183.309 12.1947V10.7661H176.938V12.1947L177.881 12.3376C178.509 12.4233 178.909 12.6518 178.909 13.6518V27.309C178.909 28.309 178.509 28.5376 177.881 28.6233L176.938 28.7661V30.1947H183.309ZM194.54 30.509C198.368 30.509 202.168 28.709 202.168 23.0804V17.909C202.168 12.4804 198.597 10.4518 194.54 10.4518C190.54 10.4518 186.997 12.4804 186.997 17.909V23.0804C186.997 28.709 190.768 30.509 194.54 30.509ZM194.54 28.3661C191.511 28.3661 189.426 26.8804 189.426 23.0804V17.7661C189.426 14.2804 191.511 12.5947 194.54 12.5947C197.568 12.5947 199.74 14.2233 199.74 17.7661V23.0804C199.74 26.9376 197.568 28.3661 194.54 28.3661ZM216.672 12.1947L217.615 12.3376C218.529 12.4804 218.643 12.6518 218.643 13.6518V25.709L209.701 10.7661H205.301V12.1947L206.215 12.3661C206.929 12.509 206.958 12.6804 206.958 13.6518V27.309C206.958 28.309 206.843 28.4804 205.929 28.6233L204.986 28.7661V30.1947H211.215V28.7661L210.272 28.6233C209.358 28.4804 209.243 28.309 209.243 27.309V14.4233L218.672 30.1947H220.929V13.6518C220.929 12.6518 221.043 12.4804 221.958 12.3376L222.901 12.1947V10.7661H216.672V12.1947ZM227.868 17.6804L229.296 13.7661V10.7661H226.153V13.2518L226.81 13.3376C227.01 13.3661 227.096 13.6233 227.096 13.8804L226.268 17.6804H227.868Z" />
						<rect
							x="249.979"
							y="7.68553"
							width="18.3758"
							height="20.8131"
							transform="rotate(15 249.979 7.68553)"
							fill="#00EAA4"
							stroke="#090909"
							stroke-width="1.5"
						/>
						<path d="M256.542 27.4741C259.707 27.4741 261.839 25.8807 261.839 23.017V22.4356C261.839 19.2488 260.008 18.1938 256.972 18.1938C255.723 18.1938 254.733 18.5814 254.302 18.8182V18.2584C254.302 16.0836 255.379 15.3515 256.757 15.3515C257.403 15.3515 258.135 15.5023 258.587 16.1267H260.977C261.085 15.3946 261.128 14.6625 261.171 13.9304C260.267 13.4567 258.802 12.8753 256.757 12.8753C253.312 12.8753 251.288 14.7702 251.288 18.4091V22.2633C251.288 25.5793 253.226 27.4741 256.542 27.4741ZM256.542 24.9979C255.099 24.9979 254.302 24.1582 254.302 22.2418V21.3159C254.754 21.1221 255.573 20.67 256.972 20.67C257.834 20.67 258.824 20.7346 258.824 22.5648V22.8878C258.824 24.718 257.403 24.9979 256.542 24.9979Z" />
						<rect
							x="236.39"
							y="7.68553"
							width="18.3758"
							height="20.8131"
							transform="rotate(15 236.39 7.68553)"
							fill="#00EAA4"
							stroke="#090909"
							stroke-width="1.5"
						/>
						<path d="M242.463 27.4741C245.628 27.4741 247.76 25.8807 247.76 23.017V22.4356C247.76 19.2488 245.93 18.1938 242.894 18.1938C241.645 18.1938 240.654 18.5814 240.224 18.8182V18.2584C240.224 16.0836 241.3 15.3515 242.678 15.3515C243.324 15.3515 244.056 15.5023 244.509 16.1267H246.899C247.006 15.3946 247.049 14.6625 247.092 13.9304C246.188 13.4567 244.724 12.8753 242.678 12.8753C239.233 12.8753 237.209 14.7702 237.209 18.4091V22.2633C237.209 25.5793 239.147 27.4741 242.463 27.4741ZM242.463 24.9979C241.02 24.9979 240.224 24.1582 240.224 22.2418V21.3159C240.676 21.1221 241.494 20.67 242.894 20.67C243.755 20.67 244.745 20.7346 244.745 22.5648V22.8878C244.745 24.718 243.324 24.9979 242.463 24.9979Z" />
					</svg>
				</a>

				<button onClick={() => setIsMenuOpen(true)}>
					<span class="typo-b5">โปรเจคเลือกตั้ง' 66</span>
					<svg width="15" height="12" viewBox="0 0 15 12" fill="none">
						<rect width="15" height="2" fill="currentColor" />
						<rect y="5" width="15" height="2" fill="currentColor" />
						<rect y="10" width="15" height="2" fill="currentColor" />
					</svg>
				</button>
			</div>

			<Show when={isMenuOpen()}>
				<div class={css.overlay}>
					<div>
						<button onClick={() => setIsMenuOpen(false)}>
							<svg
								width="18"
								height="18"
								viewBox="0 0 18 18"
								fill="none"
								xmlns="http://www.w3.org/2000/svg"
							>
								<path
									d="M2.04285 1.90173C2.06834 2.1312 2.32104 2.3098 2.46317 2.4712C3.2289 3.34076 4.07345 4.10198 4.91053 4.89823C5.60455 5.55839 6.31582 6.20468 7.00537 6.86425C8.1353 7.94506 9.29686 8.97948 10.3951 10.0777C11.4638 11.1465 12.6373 12.0512 13.6627 13.1555C14.0587 13.582 14.5241 13.932 14.9305 14.3623C15.1782 14.6245 15.8273 15.3249 16.1982 15.3249"
									stroke="#090909"
									stroke-width="2"
									stroke-linecap="round"
								/>
								<path
									d="M1.43274 16.4232C4.56015 13.2958 7.66286 10.1069 11.0188 7.23033C11.8977 6.47702 12.7934 5.74792 13.6357 4.95245C13.9917 4.61616 14.367 4.01715 14.8559 3.85419"
									stroke="#090909"
									stroke-width="2"
									stroke-linecap="round"
								/>
							</svg>
						</button>

						<div class={`typo-b5 ${css.overlay__menu}`}>
							<a
								href="/"
								class={
									location.pathname === '/' && css.overlay__menu__active_link
								}
							>
								<strong>หน้าหลัก</strong>
							</a>
							<h2>โปรเจคต่างๆ</h2>
							<For each={projectLinks}>
								{({ EnName, Subtitle, URL, ComingSoon, isExternal }) => (
									<Show
										when={ComingSoon}
										fallback={
											<a
												class={`${css.overlay__menu__item} ${
													!isExternal &&
													location.pathname.startsWith(URL) &&
													css.overlay__menu__active_link
												}`}
												href={URL}
												target={isExternal ? '_blank' : '_parent'}
											>
												<div>
													<p>{EnName}</p>
													<span class="typo-b7">{Subtitle}</span>
												</div>
												<Show when={isExternal}>
													<svg
														width="10"
														height="10"
														viewBox="0 0 10 10"
														fill="none"
													>
														<path
															d="M2.21074 7.80589C3.29791 6.35632 4.61113 5.10436 5.98082 3.91998C6.0496 3.8605 7.6915 2.38616 7.63711 2.31002C7.56393 2.20757 6.74286 2.25395 6.69604 2.2521C5.84372 2.21859 4.96909 1.81348 4.11603 1.80603C3.27554 1.79869 2.44626 1.83292 1.60843 1.85526C1.53791 1.85714 1.26655 1.92 1.48102 1.90738C2.51769 1.8464 3.61083 1.80603 4.64801 1.80603C5.14801 1.80603 6.04607 1.80732 6.69604 1.7351C7.25311 1.60063 8.11672 1.6361 8.67374 1.50504C8.91934 1.44725 8.69075 1.90358 8.67374 2.01466C8.49832 3.16005 8.31631 4.2541 8.03091 5.37936C7.80489 6.27055 7.52708 7.09503 7.52708 8.01437"
															stroke="#090909"
															stroke-width="2"
															stroke-linecap="round"
														/>
													</svg>
												</Show>
											</a>
										}
									>
										<div class={css.overlay__menu__item}>
											<div>
												<p>{EnName}</p>
												<span class="typo-b7">{Subtitle}</span>
											</div>
											<div class="typo-b7">Coming Soon!</div>
										</div>
									</Show>
								)}
							</For>
						</div>
					</div>
				</div>
			</Show>
		</>
	);
};

export default Header;
